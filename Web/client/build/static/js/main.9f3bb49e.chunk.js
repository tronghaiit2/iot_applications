(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{300:function(e,t,a){},326:function(e,t){},328:function(e,t){},344:function(e,t){},346:function(e,t){},370:function(e,t){},371:function(e,t){},373:function(e,t){},375:function(e,t){},518:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(17),r=a.n(i),s=(a(300),a(282)),o=a(26),l=a(128),j=a(560),b=a(547),h=a(5),d=Object(b.a)((function(e){return{root:Object(l.a)({backgroundSize:"cover",backgroundAttachment:"fixed",background:"linear-gradient(-30deg, #33ccff, #eee, #ffccff, #81d5ff)",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",padding:"10px 0px"},e.breakpoints.up("md"),{padding:"20px"})}})),u=function(e){var t=e.children,a=d();return Object(h.jsx)(j.a,{className:a.root,children:Object(h.jsx)(j.a,{width:"80vw",minHeight:"90vh",bgcolor:"rgba(255, 255, 255, 0.4)",p:"20px 20px 40px 20px",children:t})})},x=a(91),p=a.n(x),g=a(261),m=a(22),O=a(550),f=a(559),y=a(563),v=a(556),w=a(262),k=a.n(w),S=a(263),D=a.n(S),B=a(557),C=a(561),N=a.p+"static/media/co2.4837aad8.svg",M=a.p+"static/media/eco-factory.707bf0e0.svg",W=a.p+"static/media/plan.8f869800.svg",I=a(264),z=a.n(I),H=a(265),K=a.n(H),L=a(551),V=a(566),A=a(555),P=a(281),q=a(115),E=a(285),F=function(e){var t=e.data,a=e.yAxisKey,n=e.chartName,c="#66bb6a";return t.forEach((function(e){e.ppm>4?c="#fb8c00":e.ppm>10&&(c="#e53935")})),Object(h.jsxs)(j.a,{height:"100%",position:"relative",bgcolor:"rgba(255, 255, 255, 0.5)",borderRadius:15,children:[Object(h.jsxs)(j.a,{position:"absolute",top:0,left:10,display:"flex",alignItems:"center",children:[Object(h.jsx)(z.a,{style:{color:"#66bb6a"}}),Object(h.jsx)(O.a,{variant:"h6",children:n})]}),Object(h.jsxs)(j.a,{position:"absolute",top:20,right:10,display:"flex",alignItems:"center",style:{color:"#9e9e9e"},children:[Object(h.jsx)(K.a,{}),Object(h.jsx)(O.a,{variant:"body2",style:{marginLeft:5},children:(new Date).toLocaleDateString()})]}),Object(h.jsx)(L.a,{width:"100%",height:"100%",children:Object(h.jsxs)(V.a,{data:t,margin:{top:50,right:20},children:[Object(h.jsx)(A.a,{strokeDasharray:"1 1"}),Object(h.jsx)(P.a,{dataKey:a,width:40,stroke:"#9e9e9e"}),Object(h.jsx)(q.a,{}),Object(h.jsx)(E.a,{type:"linear",dataKey:a,stroke:c,strokeWidth:2.5})]})})]})},G=function(e){var t=e.ppm,a=e.air,n=e.status,c=e.icon,i="";return"Normal"===n?i="#66bb6a":"Warning"===n?i="#fb8c00":"Dangerous"===n&&(i="#e53935"),Object(h.jsx)(j.a,{width:350,height:180,bgcolor:"rgba(255, 255, 255, 0.8)",padding:"20px",borderRadius:"15px",display:"flex",alignItems:"center",children:Object(h.jsxs)(j.a,{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",children:[Object(h.jsxs)(j.a,{display:"flex",flexDirection:"column",children:[Object(h.jsxs)(j.a,{mb:3,children:[Object(h.jsx)(O.a,{variant:"h3",style:{color:"#616161"},children:a}),Object(h.jsxs)(O.a,{variant:"h4",style:{color:"#9e9e9e"},children:[t," ppm"]})]}),Object(h.jsxs)(j.a,{children:[Object(h.jsx)(O.a,{variant:"h3",style:{color:"#616161"},children:"Status"}),Object(h.jsx)(O.a,{variant:"h4",style:{color:i},children:n})]})]}),Object(h.jsx)(j.a,{children:Object(h.jsx)(j.a,{clone:!0,width:100,height:100,children:Object(h.jsx)("img",{src:c,alt:"Air quantity"})})})]})})},J=function(){var e=D.a.connect("wss://broker.emqx.io:8084/mqtt"),t=Object(n.useState)({CO:0,CO2:0,NH4:0,Acetona:0}),a=Object(m.a)(t,2),c=a[0],i=a[1],r=Object(n.useState)([]),s=Object(m.a)(r,2),o=s[0],l=s[1],b=Object(n.useState)(null),d=Object(m.a)(b,2),u=d[0],x=d[1],w=Object(n.useState)("HoangMai"),S=Object(m.a)(w,2),I=S[0],z=S[1],H=Object(n.useState)({lng:20.98334,lat:105.852048}),K=Object(m.a)(H,1)[0];Object(n.useEffect)((function(){Object(g.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("https://iot-airquantity.herokuapp.com/statistical/".concat(I));case 2:t=e.sent,a=t.data.airStatistical.map((function(e){return{air:e.ppm.map((function(e){return{ppm:e}})),name:e.air}})),l(a);case 5:case"end":return e.stop()}}),e)})))()}),[I]),Object(n.useEffect)((function(){return e.on("connect",(function(){e.subscribe("/MQ135/".concat(I,"/data"))})),e.on("message",(function(e,t){i(JSON.parse(t.toString()))})),function(){e.end()}}),[I,e]);return Object(h.jsxs)(j.a,{children:[Object(h.jsxs)(j.a,{display:"flex",alignItems:"center",mb:"20px",children:[Object(h.jsxs)(O.a,{variant:"h4",style:{marginRight:"20px"},children:["Station:"," "]}),Object(h.jsxs)(f.a,{labelId:"demo-customized-select-label",id:"demo-customized-select",value:I,onChange:function(t){var a=t.target.value;switch(z(a),a){case"BachKhoa":u.setView([21.0044156,105.8418001],17);break;case"HoangMai":u.setView([20.9749322,105.8229188],17);break;case"PhuongMai":u.setView([21.0031746,105.8335332],17);break;case"DongDa":u.setView([21.0147467,105.8030133],17);break;case"GiapBat":u.setView([20.9832988,105.8435466],17);break;case"LongBien":u.setView([21.037137,105.8551097],17);break;default:u.setView([21.0044156,105.8418001],17)}e.end()},children:[Object(h.jsx)(y.a,{value:"BachKhoa",children:"B\xe1ch Khoa"}),Object(h.jsx)(y.a,{value:"HoangMai",children:"Ho\xe0ng Mai"}),Object(h.jsx)(y.a,{value:"PhuongMai",children:"Ph\u01b0\u01a1ng Mai"}),Object(h.jsx)(y.a,{value:"DongDa",children:"\u0110\u1ed1ng \u0110a"}),Object(h.jsx)(y.a,{value:"GiapBat",children:"Gi\xe1p B\xe1t"}),Object(h.jsx)(y.a,{value:"LongBien",children:"Long Bi\xean"})]})]}),Object(h.jsx)(v.a,{container:!0,spacing:4,children:Object.keys(c).map((function(e){if("CO"===e){var t="Normal";return c[e]>=10?t="Dangerous":c[e]>=5&&(t="Warning"),Object(h.jsx)(v.a,{item:!0,xs:12,sm:6,lg:3,children:Object(h.jsx)(G,{ppm:c[e],air:e,icon:M,status:t})},e)}if("CO2"===e){var a="Normal";return c[e]>=8?a="Dangerous":c[e]>=3&&(a="Warning"),Object(h.jsx)(v.a,{item:!0,xs:12,sm:6,md:6,lg:3,children:Object(h.jsx)(G,{ppm:c[e],air:e,status:a,icon:N})},e)}if("NH4"===e){var n="Normal";return c[e]>=15?n="Dangerous":c[e]>=7&&(n="Warning"),Object(h.jsx)(v.a,{item:!0,xs:12,sm:6,md:6,lg:3,children:Object(h.jsx)(G,{ppm:c[e],air:e,status:n,icon:W})},e)}if("Acetona"===e){var i="Normal";return c[e]>=9?i="Dangerous":c[e]>=7&&(i="Warning"),Object(h.jsx)(v.a,{item:!0,xs:12,sm:6,md:6,lg:3,children:Object(h.jsx)(G,{ppm:c[e],air:e,status:i,icon:W})},e)}return null}))}),Object(h.jsxs)(v.a,{container:!0,spacing:2,style:{marginTop:"50px"},children:[Object(h.jsx)(v.a,{item:!0,xs:12,sm:6,style:{height:"500px"},children:Object(h.jsx)(B.a,{center:[K.lng,K.lat],zoom:17,scrollWheelZoom:!1,whenCreated:function(e){return x(e)},children:Object(h.jsx)(C.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})})}),Object(h.jsx)(v.a,{item:!0,container:!0,xs:12,sm:6,spacing:1,children:o.map((function(e){return Object(h.jsx)(v.a,{item:!0,xs:12,sm:6,children:Object(h.jsx)(F,{data:e.air,yAxisKey:"ppm",chartName:"Statistical ".concat(e.name)})},e.name)}))})]})]})};var R=function(){return Object(h.jsx)(u,{children:Object(h.jsx)(s.a,{children:Object(h.jsx)(o.c,{children:Object(h.jsx)(o.a,{path:"/",exact:!0,children:Object(h.jsx)(J,{})})})})})},T=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,567)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),i(e),r(e)}))},Q=a(558),Z=a(283),U=a(564),X=Object(Z.a)({palette:{primary:{main:"#66ba6a"}},typography:{h2:{fontSize:"2.5rem",fontWeight:"bold",color:"#757575",marginBottom:"40px"},h3:{color:"#66ba6a",fontSize:"1.5rem",fontWeight:"bold"},h4:{fontSize:"1.3rem",fontWeight:"bold"}}}),Y=X=Object(U.a)(X);r.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(Q.a,{theme:Y,children:Object(h.jsx)(R,{})})}),document.getElementById("root")),T()}},[[518,1,2]]]);
//# sourceMappingURL=main.9f3bb49e.chunk.js.map